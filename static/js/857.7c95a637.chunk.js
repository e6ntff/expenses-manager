"use strict";(self.webpackChunkexpenses_manager=self.webpackChunkexpenses_manager||[]).push([[857],{8650:(e,t,s)=>{s.d(t,{Z:()=>M});var l=s(2791),n=s(3475),i=s(7257),a=s(4320),r=s(1431),c=s(9522),o=s(4520),d=s(3936),u=s(8807),Z=s(8416),m=s(7703),x=s(2506),j=s(6051),p=s(914),h=s(1429),g=s(5160),y=s(6220),S=s(7892),C=s.n(S),v=s(2499),b=s(4878),I=s(9335),k=s(7857),f=s(2622),z=s(184);const D=(0,i.Pi)((e=>{let{opened:t,setOpened:s,itemIds:n}=e;const{list:i,replaceItem:r}=a.listStore,{isSmallScreen:c}=u.userStore,{userOptions:d}=m.optionsStore,{language:S}=d,D=(0,l.useCallback)((e=>{r(e,{...i[e],categoryId:b.Z.emptyItem.categoryId})}),[i,r]);return(0,z.jsx)(x.Z,{open:t,onCancel:()=>{s(!1)},okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:(0,z.jsx)(I.ZP,{autoHide:!0,style:{blockSize:"75vh"},children:(0,z.jsx)(j.Z,{children:n.map((e=>(0,z.jsxs)(y.Z,{children:[(0,z.jsx)(p.Z,{span:5,children:(0,z.jsx)(h.Z,{value:C()(i[e].date).format("DD.MM.YY"),style:{scale:c?".75":"1"}})}),(0,z.jsx)(p.Z,{span:10,children:(0,z.jsx)(o.Z,{justify:"center",style:{opacity:i[e].title?"1":".5"},children:c?(0,z.jsx)(g.Z.Text,{strong:!0,ellipsis:!0,children:i[e].title||Z.Z.noTitle[d.language]}):(0,z.jsx)(v.Z,{ellipsis:!0,level:3,style:{margin:0},children:i[e].title||Z.Z.noTitle[d.language]})})}),(0,z.jsx)(p.Z,{span:2,children:(0,k.J1)(Z.Z.delete[S],c,f.Z,(()=>D(e)))})]},e)))})})})})),O=(0,l.memo)(D),M=(0,i.Pi)((e=>{let{initialCategoryId:t,category:s,disabled:i}=e;const{replaceCategory:x,categories:j,setLastDeletedCategoryIds:p,lastDeletedCategoryIds:h}=n.categoryStore,{list:g}=a.listStore,{isSmallScreen:y}=u.userStore,{userOptions:S}=m.optionsStore,{language:C}=S,[v,b]=(0,l.useState)(s||j[t]),[I,D]=(0,l.useState)(!1),M=(0,l.useMemo)((()=>Object.keys(g).reduce(((e,s)=>g[s].categoryId===t?[...e,s]:[...e]),[])),[g,t]),w=(0,l.useCallback)((()=>{p([...h,t])}),[p,t,h]),F=(0,l.useCallback)((e=>{b((s=>JSON.stringify(s)!==JSON.stringify(e)?(x(t,e),e):s))}),[b,x,t]),J=(0,l.useCallback)((e=>{b((t=>{const s={...t,name:e};return F(s),s}))}),[b,F]),P=(0,l.useCallback)((e=>{b((t=>{const s={...t,color:"#".concat(e.toHex())};return F(s),s}))}),[b,F]),A=(0,z.jsx)(r.Z,{title:Z.Z.pickColor[C],children:(0,z.jsx)(c.Z,{size:y?"small":"middle",value:v.color,format:"hex",onChangeComplete:P})}),Y=(0,l.useMemo)((()=>"".concat(Z.Z.itemsWithCurrentCategory[C],": ").concat(M.length)),[M,C]),E=(0,z.jsxs)(o.Z,{align:"center",justify:"space-evenly",children:[(0,k.zF)(Y,y,(()=>{M.length&&D(!0)})),A,(0,k.J1)(Z.Z.delete[S.language],y,f.Z,w)]});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(d.Z,{style:{inlineSize:y?"8em":"12em",pointerEvents:i?"none":"auto"},size:y?"small":"default",title:(0,k.I$)(v.name,y,C,{onChange:J}),actions:[E],styles:{title:{padding:10},body:{padding:0}}}),(0,z.jsx)(O,{opened:I,setOpened:D,itemIds:M})]})}))},594:(e,t,s)=>{s.d(t,{Z:()=>P});var l=s(2791),n=s(1457),i=s(7257),a=s(8807),r=s(8416),c=s(4133),o=s(1468),d=s(2506),u=s(3070),Z=s(6106),m=s(914),x=s(3556),j=s(4878),p=s(7892),h=s.n(p),g=s(3475),y=s(126),S=s(8228),C=s(184);const v=(0,i.Pi)((e=>{let{id:t,onChange:s}=e;const{categories:l}=g.categoryStore,{isSmallScreen:n}=a.userStore;return(0,C.jsx)(y.Z,{size:n?"small":"middle",style:{minInlineSize:"7em"},onChange:s,value:t,suffixIcon:(0,C.jsx)(S.Z,{style:{color:l[t]&&l[t].color}}),options:Object.keys(l).filter((e=>!l[e].deleted)).map((e=>({label:l[e].name,value:e})))})}));var b=s(7575),I=s(732),k=s(7703),f=s(4320),z=s(7106),D=s(9286),O=s(1234),M=s(8104),w=s(8709);const F=(0,i.Pi)((e=>{let{onChange:t,image:s}=e;const[n,i]=(0,l.useState)(!1),a=(0,l.useCallback)((e=>{"uploading"===e.file.status&&i(!0),"done"===e.file.status&&((e,t)=>{const s=new FileReader;s.addEventListener("load",(()=>t(s.result))),s.readAsDataURL(e)})(e.file.originFileObj,(e=>{i(!1),t(e)}))}),[i,t]);return(0,C.jsx)(w.Z,{cropShape:"round",rotationSlider:!0,children:(0,C.jsx)(O.Z,{action:"1",accept:"image/*",listType:"picture-circle",showUploadList:!1,onChange:a,maxCount:1,children:s?(0,C.jsx)(M.Z,{preview:!1,src:s,style:{width:"100%",borderRadius:"50px"}}):n?(0,C.jsx)(z.Z,{style:{scale:"1.5"}}):(0,C.jsx)(D.Z,{style:{scale:"1.5"}})})})}));var J=s(8418);const P=(0,i.Pi)((e=>{let{opened:t,initialItemId:s,toggleOpened:i,submitItem:p}=e;const[g,y]=(0,l.useState)(j.Z.baseCurrency),{currencyRates:S,isSmallScreen:z}=a.userStore,{userOptions:D}=k.optionsStore,{list:O}=f.listStore,{language:M}=D,w=(0,l.useMemo)((()=>void 0!==s?O[s]:j.Z.emptyItem),[O,s]),[P,A]=(0,l.useState)(w),Y=(0,l.useCallback)((e=>{const{value:t}=e.target;A((e=>({...e,title:t})))}),[A]),E=(0,l.useCallback)((e=>{e&&A((t=>({...t,date:e.valueOf()})))}),[A]),T=(0,l.useCallback)((e=>{A((t=>({...t,categoryId:e})))}),[A]),H=(0,l.useCallback)((e=>{const{value:t}=e.target;A((e=>{const s={...e,price:{...e.price,[g]:Number(t)}};return{...s,price:(0,n.Z)(s.price,S,g)}}))}),[A,g,S]),L=(0,l.useCallback)((e=>{(0,J.u)(e,.5).then((e=>{A((t=>({...t,image:e})))}))}),[A]);(0,l.useEffect)((()=>{const e=s=>{"Enter"===s.key&&t&&(p(P),window.removeEventListener("keyup",e))};return window.addEventListener("keyup",e),()=>{window.removeEventListener("keyup",e)}}),[P,p,t]);const N=(0,C.jsx)(c.Z,{required:!0,type:"text",value:P.title,onInput:Y}),R=(0,C.jsx)(c.Z,{required:!0,type:"number",min:"1",step:"1",value:Math.round(P.price[g]),onInput:H}),$=(0,C.jsx)(x.Z,{value:g,setCurrency:y,onChange:y}),q=(0,C.jsx)(o.Z,{required:!0,onChange:E,value:h()(P.date),minDate:j.Z.startDate,maxDate:h()()}),B=(0,C.jsx)(v,{id:P.categoryId,onChange:T}),W=(0,C.jsx)(F,{image:P.image,onChange:L});return(0,C.jsx)(d.Z,{open:t,okButtonProps:{size:z?"small":"middle"},cancelButtonProps:{size:z?"small":"middle"},onOk:()=>{p(P)},onCancel:()=>{A(w),i()},okText:(0,C.jsx)(b.Z,{}),cancelText:(0,C.jsx)(I.Z,{}),children:(0,C.jsxs)(u.Z,{size:z?"small":"middle",layout:"vertical",style:{inlineSize:"100%"},children:[(0,C.jsx)(u.Z.Item,{label:r.Z.title[M],children:N}),(0,C.jsx)(u.Z.Item,{label:r.Z.price[M],children:(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(m.Z,{span:16,children:R}),(0,C.jsx)(m.Z,{span:1}),(0,C.jsx)(m.Z,{span:7,children:$})]})}),(0,C.jsx)(u.Z.Item,{label:r.Z.dateAndCat[M],children:(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(m.Z,{span:10,children:q}),(0,C.jsx)(m.Z,{span:1}),(0,C.jsx)(m.Z,{span:13,children:B})]})}),(0,C.jsx)(u.Z.Item,{label:r.Z.image[M],children:W})]})})}))},7857:(e,t,s)=>{s.d(t,{$m:()=>P,I$:()=>D,IX:()=>M,J1:()=>J,JN:()=>F,Sf:()=>Y,Vh:()=>O,o5:()=>w,q8:()=>A,zF:()=>f});var l=s(9966),n=s(1635),i=s(2864),a=s(1431),r=s(5160),c=s(4520),o=s(8104),d=s(9367),u=s(1429),Z=s(952),m=s(2556),x=s(7338),j=s(2499),p=s(8416),h=s(7892),g=s.n(h),y=s(8418),S=(s(2791),s(2603)),C=s(4191),v=s.n(C),b=s(6246),I=s(8650),k=s(184);const f=(e,t,s)=>(0,k.jsx)(a.Z,{title:e,children:(0,k.jsx)(l.Z,{onClick:s,style:{scale:t?"1":"1.5"}})}),z=(e,t,s,l)=>" "===e?(0,k.jsx)(k.Fragment,{children:"\xa0"}):s?(0,k.jsx)(r.Z.Text,{editable:l,ellipsis:!0,strong:!0,mark:t,children:e}):(0,k.jsx)(j.Z,{editable:l,ellipsis:!0,level:3,style:{margin:0},mark:t,children:e}),D=(e,t,s,l,n)=>{const i=n?e.split("").map(((e,s)=>{const i=n.some((e=>{let[t,l]=e;return s>=t&&s<=l}));return z(e,i,t,l)})):[z(e||p.Z.noTitle[s],!1,t,l)];return(0,k.jsx)(a.Z,{title:e,children:(0,k.jsx)(c.Z,{justify:"center",style:{inlineSize:"100%",opacity:e?"1":".5"},children:i})},v()())},O=(e,t,s,l)=>e?(0,k.jsx)(a.Z,{color:"#0005",placement:"right",title:!e.startsWith("#")&&(0,k.jsx)(o.Z,{preview:!1,src:e,style:{borderRadius:"50%",inlineSize:"100%",blockSize:"100%",objectFit:"cover"}}),children:(0,k.jsx)(d.C,{style:{cursor:"pointer",background:e.startsWith("#")?e:"unset"},size:t?"small":"default",icon:(0,k.jsx)(c.Z,{style:{inlineSize:"100%",blockSize:"100%",objectFit:"cover"},children:!e.startsWith("#")&&(0,k.jsx)(o.Z,{preview:!1,src:e,style:{inlineSize:"100%",blockSize:"100%",objectFit:"cover"}})})})}):(0,k.jsx)(a.Z,{title:p.Z.noImage[s],children:(0,k.jsx)(d.C,{style:{cursor:"pointer"},onClick:l,icon:(0,k.jsx)(n.Z,{})})}),M=(e,t)=>(0,k.jsx)(u.Z,{value:g()(e).format("DD.MM.YY"),style:{scale:t?".67":".75"}}),w=e=>(0,k.jsx)(c.Z,{vertical:!0,align:"stretch",children:e&&(0,k.jsx)(Z.Z,{color:e.color,children:(0,k.jsx)("span",{style:{margin:"auto",color:e.color,filter:"invert(1)"},children:e.name})})}),F=(e,t,s)=>(0,k.jsx)(c.Z,{justify:"center",children:t?(0,k.jsxs)(r.Z.Text,{strong:!0,children:[(0,y.Rh)(s),Math.round(e[s])]}):(0,k.jsx)(j.Z,{level:3,style:{margin:0},children:(0,y.Rh)(s,e[s])})}),J=(e,t,s,l)=>(0,k.jsx)(a.Z,{title:e,children:(0,k.jsx)(s,{onClick:l,style:{scale:t?"1":"1.5"}})}),P=(e,t,s,l,n,i)=>(0,k.jsx)(a.Z,{color:"#0000",title:e?(0,k.jsxs)(c.Z,{vertical:!0,gap:s?4:8,children:[(0,k.jsx)(m.ZP,{onClick:n,size:s?"small":"middle",children:p.Z.deleteSelected[t]}),i&&(0,k.jsx)(m.ZP,{onClick:i,size:s?"small":"middle",children:p.Z.restoreSelected[t]})]}):"",children:(0,k.jsx)(x.Z,{onChange:l,checked:e})}),A=(e,t,s,l)=>(0,k.jsx)(S.Z,{size:l?"small":"middle",allowClear:!0,onChange:e,value:t,loading:s}),Y=(e,t,s,l)=>(0,k.jsx)(a.Z,{placement:"left",color:"#0005",title:"item"===t?(0,k.jsx)(b.Z,{disabled:!0,mode:"grid",initialItem:{id:e,overlaps:[]},handleSelection:()=>{},deleteAll:()=>{},selected:l}):(0,k.jsx)(I.Z,{initialCategoryId:e,disabled:!0}),children:(0,k.jsx)(i.Z,{style:{scale:s?"1":"1.5"}})})},6246:(e,t,s)=>{s.d(t,{Z:()=>C});var l=s(2791),n=s(6220),i=s(4520),a=s(914),r=s(3936),c=s(7257),o=s(4320),d=s(8807),u=s(594),Z=s(7703),m=s(8416),x=s(3475),j=s(7892),p=s.n(j),h=s(7857),g=s(1752),y=s(2622),S=s(184);const C=(0,c.Pi)((e=>{let{mode:t,initialItem:s,deleteAll:c,handleSelection:j,selected:C,disabled:v}=e;const{isSmallScreen:b}=d.userStore,{replaceItem:I,setLastDeletedItemIds:k,lastDeletedItemIds:f,list:z}=o.listStore,{userOptions:D}=Z.optionsStore,{categories:O}=x.categoryStore,{currency:M,language:w}=D,[F,J]=(0,l.useState)(!1),[P,A]=(0,l.useState)(z[s.id]),Y=(0,l.useCallback)((()=>{J((e=>!e))}),[J]),E=(0,l.useCallback)((e=>{A((t=>{if(JSON.stringify(t)!==JSON.stringify(e)){const t={...e,updatedAt:p()().valueOf()};return I(s.id,t),t}return t})),Y()}),[A,I,Y,s.id]),T=(0,l.useCallback)((()=>{k([...f,s.id])}),[k,s.id,f]),H=(0,S.jsxs)(i.Z,{justify:"space-evenly",children:[(0,h.J1)(m.Z.edit[w],b,g.Z,Y),(0,h.JN)(P.price,b,M),(0,h.J1)(m.Z.delete[w],b,y.Z,T)]}),L=(0,S.jsxs)(i.Z,{align:"center",children:[(0,h.Vh)(P.image,b,w,Y),(0,h.IX)(P.date,b)]}),N=(0,l.useMemo)((()=>P.updatedAt?(0,S.jsxs)(S.Fragment,{children:["".concat(m.Z.createdAt[w]," ").concat(p()(P.createdAt).format("HH:mm:ss DD.MM.YY")),(0,S.jsx)("br",{}),"".concat(m.Z.updatedAt[w]," ").concat(p()(P.updatedAt).format("HH:mm:ss DD.MM.YY"))]}):(0,S.jsx)(S.Fragment,{children:"".concat(m.Z.createdAt[w]," ").concat(p()(P.createdAt).format("HH:mm:ss DD.MM.YY"))})),[P,w]),R=(0,S.jsxs)(i.Z,{children:[(0,h.$m)(C,w,b,j,c),(0,h.I$)(P.title,b,w,!1,s.overlaps)]});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.Z,{opened:F,initialItemId:s.id,toggleOpened:Y,submitItem:E}),"list"===t?(0,S.jsxs)(n.Z,{style:{pointerEvents:v?"none":"auto"},children:[(0,S.jsx)(a.Z,{span:1,children:(0,h.$m)(C,w,b,j,c)}),(0,S.jsx)(a.Z,{children:L}),(0,S.jsx)(a.Z,{span:8,children:(0,h.I$)(P.title,b,w,!1,s.overlaps)}),(0,S.jsx)(a.Z,{span:3,children:(0,h.o5)(O[P.categoryId])}),(0,S.jsx)(a.Z,{span:5,children:(0,h.JN)(P.price,b,M)}),(0,S.jsx)(a.Z,{span:1,children:(0,h.J1)(m.Z.edit[w],b,g.Z,Y)}),(0,S.jsx)(a.Z,{span:1,children:(0,h.J1)(m.Z.delete[w],b,y.Z,T)}),(0,S.jsx)(a.Z,{span:1,children:(0,h.zF)(N,b)})]}):(0,S.jsx)(r.Z,{extra:[(0,h.zF)(N,b)],size:b?"small":"default",bordered:!0,title:R,actions:[H],style:{inlineSize:b?"9em":"12em",pointerEvents:v?"none":"auto"},children:(0,S.jsx)(i.Z,{justify:"center",children:(0,S.jsxs)(i.Z,{vertical:!0,align:"stretch",gap:4,children:[L,(0,h.o5)(O[P.categoryId])]})})})]})}))}}]);
//# sourceMappingURL=857.7c95a637.chunk.js.map