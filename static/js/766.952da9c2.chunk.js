"use strict";(self.webpackChunkexpenses_manager=self.webpackChunkexpenses_manager||[]).push([[766],{2158:(e,t,s)=>{s.d(t,{Z:()=>j});var n=s(2791),a=s(7257),r=s(7201),o=s(7708),l=s(4320),i=s(7892),c=s.n(i),u=s(9026),d=s.n(u),m=s(5967),f=s(3623),g=s(7703),p=s(6619),y=s(184);const h=(0,a.Pi)((()=>{const{list:e}=l.listStore,{defaultRange:t}=g.optionsStore,s=(0,n.useMemo)((()=>(0,p.BF)(e,t)),[e,t]),a={labels:new Array(s.length).fill(""),datasets:[{data:s}]};return(0,y.jsx)(f.x1,{style:{inlineSize:"100%"},data:a,options:{plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,grid:{display:!1}},y:{display:!1,grid:{display:!1}}},elements:{point:{radius:0},line:{cubicInterpolationMode:"monotone",borderColor:"#7775"}},aspectRatio:25}})})),S=(0,n.memo)(h);m.kL.register(m.u,m.jn,m.ST,m.uw,m.f$,m.od),c().extend(d());const x=(0,a.Pi)((e=>{let{range:t,setRange:s}=e;const{list:a}=l.listStore,{defaultRange:i,setDefaultRange:u}=g.optionsStore,[d,m]=(0,n.useState)(i),f=(0,n.useMemo)((()=>{const e=Object.values(a).map((e=>e.date));return[Math.min(...e),Math.max(...e)]}),[a]),p=(0,n.useMemo)((()=>{const e=c()(f[0]).startOf("day"),t=c()(f[1]).endOf("day"),s={};let n=e;for(;n.isBefore(t)||n.isSame(t,"month");)s[n.valueOf()]=0===n.month()?n.format("YYYY"):" ",n=n.add(1,"month").startOf("month");return s}),[f]);(0,n.useEffect)((()=>{u(f)}),[f,u]),(0,n.useEffect)((()=>{s(i)}),[i,s]);const h=(0,n.useCallback)((e=>{s(e)}),[s]);return(0,n.useEffect)((()=>{m(t)}),[t]),c()(i[1]).diff(c()(i[0]),"hours")>=48?(0,y.jsxs)(r.Z,{vertical:!0,align:"stretch",style:{inlineSize:"100%"},children:[(0,y.jsx)(S,{}),(0,y.jsx)(o.Z,{range:!0,value:d,marks:p,step:null,dots:!0,tooltip:{formatter:e=>c()(e).format("MM.YY")},min:f[0],max:f[1],defaultValue:i,onChange:m,onChangeComplete:h})]}):(0,y.jsx)(y.Fragment,{})})),j=(0,n.memo)(x)},9766:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var n=s(2791),a=s(7257),r=s(4320),o=s(7201),l=s(1431),i=s(4664),c=s(8807),u=s(3623),d=s(8416),m=s(8418),f=s(7892),g=s.n(f),p=s(5967),y=s(6619),h=s(7703),S=s(184);p.kL.register(p.u,p.vn,p.ZL,p.uw,p.f$);const x=(0,a.Pi)((e=>{let{mode:t,setMode:s}=e;const{isSmallScreen:a}=c.userStore,{list:l}=r.listStore,{statsOptions:i,userOptions:f,setStatsRange:p}=h.optionsStore,{currency:x,language:j}=f,{range:O}=i,b=(0,n.useMemo)((()=>(0,y.u1)(l,x,t,g()(O[0]).year())),[x,t,O,l]),v=(0,n.useMemo)((()=>"year"===t?Object.keys(b).map((e=>{const t=g()(e);return t>=g()(O[0]).startOf("year")&&t<=g()(O[1]).endOf("year")?"#f00":"#f007"})):Object.keys(b).map((e=>{const t=Number(e);return t>=g()(O[0]).startOf("month").month()&&t<=g()(O[1]).endOf("month").month()?"#f00":"#f005"}))),[O,b,t]),k={labels:"month"===t?d.Z.months[j]:Object.keys(b),datasets:[{label:(0,m.Rh)(x),data:Object.values(b),backgroundColor:v}]},Z={plugins:{legend:{display:!1}},onClick:(e,n)=>{if(n.length){const e=n[0].index,a="year"===t?[g()(O[0]).year(Number(k.labels[e])).startOf("year").valueOf(),g()(O[0]).year(Number(k.labels[e])).endOf("year").valueOf()]:[g()(O[0]).month(e).startOf("month").valueOf(),g()(O[0]).month(e).endOf("month").valueOf()];"year"===t&&s("month"),p(a)}}};return(0,S.jsx)(o.Z,{style:{inlineSize:a?"unset":"50%"},children:(0,S.jsx)(u.$Q,{data:k,options:Z})})}));var j=s(3475);p.kL.register(p.qi,p.tt,p.u,p.De,p.Dx);const O=(0,a.Pi)((()=>{const{isSmallScreen:e}=c.userStore,{list:t}=r.listStore,{userOptions:s,statsOptions:a}=h.optionsStore,{currency:l}=s,{categories:i}=j.categoryStore,{range:d}=a,f=(0,n.useMemo)((()=>(0,y.CH)(t,d,l)),[t,l,d]),[g,p,x]=(0,n.useMemo)((()=>[f.map((e=>i[e.categoryId].name)),f.map((e=>i[e.categoryId].color)),f.map((e=>Math.round(e.value)))]),[i,f]),O={labels:g,datasets:[{label:(0,m.Rh)(l),data:x,backgroundColor:p}]};return(0,S.jsx)(o.Z,{style:{inlineSize:e?"unset":"40%"},children:(0,S.jsx)(u.by,{data:O,options:{plugins:{legend:{display:!0,position:"right"}}}})})}));var b=s(6818),v=s.n(b),k=s(2158),Z=s(6281),M=s(5160),R=s(3936),C=s(1429),E=s(1468),w=s(4878);const z=(0,a.Pi)((e=>{let{resetRange:t}=e;const{isSmallScreen:s}=c.userStore,{list:a}=r.listStore,{statsOptions:o,userOptions:i,setStatsRange:u}=h.optionsStore,{range:d}=o,{currency:f}=i,p=(0,n.useMemo)((()=>(0,y.r6)(a,d,f)),[a,d,f]),x=(0,n.useMemo)((()=>{const e="DD.MM.YY";return(0,S.jsxs)(M.Z.Text,{type:"secondary",style:{fontSize:s?".8em":"1.2em"},children:[g()(d[0]).format(e),d[0]!==d[1]?"-".concat(g()(d[1]).format(e)):""]})}),[d,s]);return(0,S.jsx)(R.Z,{bordered:!0,children:(0,S.jsx)(C.Z,{title:(0,S.jsx)(l.Z,{color:"#0000",trigger:"click",title:(0,S.jsx)(E.Z.RangePicker,{onChange:e=>{u(e.map((e=>e.valueOf())))},value:[g()(d[0]),g()(d[1])],size:s?"small":"middle",minDate:w.Z.startDate,maxDate:g()()}),children:x}),value:p,prefix:(0,m.Rh)(f),valueStyle:{color:"#f00",fontSize:s?"1.5em":"2.25em"}})})})),D=(0,n.memo)(z);var P=s(3605);g().extend(v());const Y=(0,a.Pi)((()=>{const{list:e}=r.listStore,{isSmallScreen:t,loading:s,tourRefs:a}=c.userStore,{statsOptions:u,defaultRange:d,setStatsRange:m}=h.optionsStore,{range:f}=u,[p,y]=(0,n.useState)("year"),j=(0,n.useCallback)((()=>{y("year"),m(d)}),[y,d,m]);(0,n.useEffect)((()=>{const e=e=>{"Escape"===e.key&&j()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[j]),(0,n.useEffect)((()=>{g()(f[0]).year()!==g()(f[1]).year()?y("year"):y("month")}),[f]);const b=(0,n.useMemo)((()=>f[0]!==d[0]||f[1]!==d[1]),[f,d]),v=(0,S.jsxs)(o.Z,{vertical:!0,gap:16,align:"stretch",style:{inlineSize:"100%"},children:[(0,S.jsx)(o.Z,{ref:a[8],style:{inlineSize:"100%"},children:(0,S.jsx)(k.Z,{range:f,setRange:m})}),(0,S.jsxs)(o.Z,{ref:a[7],align:"center",justify:"space-between",vertical:t,children:[(0,S.jsx)(x,{mode:p,setMode:y}),(0,S.jsx)(O,{})]})]});return s?(0,S.jsx)(Z.Z,{}):Object.keys(e).length?(0,S.jsxs)(o.Z,{vertical:!0,gap:32,align:"start",children:[(0,S.jsx)(l.Z,{placement:"rightTop",color:"#0000",open:b,title:(0,S.jsx)(P.Z,{onClick:j,style:{scale:t?"1":"1.25",filter:"invert()"}}),children:(0,S.jsx)(D,{resetRange:j})}),v]}):(0,S.jsx)(i.Z,{image:i.Z.PRESENTED_IMAGE_SIMPLE,description:""})})),L=(0,n.memo)(Y)}}]);
//# sourceMappingURL=766.952da9c2.chunk.js.map