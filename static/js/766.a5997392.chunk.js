"use strict";(self.webpackChunkexpenses_manager=self.webpackChunkexpenses_manager||[]).push([[766],{3932:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(3605),r=s(1431),n=s(2556),o=s(7257),l=(s(2791),s(8416)),i=s(7703),u=s(8807),c=s(184);const d=(0,o.Pi)((e=>{let{disabled:t,reset:s}=e;const{userOptions:o}=i.optionsStore,{isSmallScreen:d}=u.userStore;return(0,c.jsx)(r.Z,{title:l.Z.reset[o.language],children:(0,c.jsx)(n.ZP,{disabled:t,onClick:s,size:d?"small":"middle",children:(0,c.jsx)(a.Z,{})})})}))},2158:(e,t,s)=>{s.d(t,{Z:()=>k});var a=s(2791),r=s(7257),n=s(4520),o=s(4248),l=s(1431),i=s(7708),u=s(4320),c=s(7892),d=s.n(c),m=s(9026),f=s.n(m),p=s(4895),g=s(4187),S=s(8807),y=s(5967),h=s(3623),x=s(7703),j=s(6619),O=s(184);const b=(0,r.Pi)((()=>{const{userList:e,listTemplate:t}=u.listStore,{defaultRange:s}=x.optionsStore,{isTourStarted:r}=S.userStore,n=(0,a.useMemo)((()=>r?t:e),[r,t,e]),o=(0,a.useMemo)((()=>(0,j.BF)(n,s)),[n,s]),l={labels:new Array(o.length).fill(""),datasets:[{data:o}]};return(0,O.jsx)(h.x1,{style:{inlineSize:"100%"},data:l,options:{plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,grid:{display:!1}},y:{display:!1,grid:{display:!1}}},elements:{point:{radius:0},line:{cubicInterpolationMode:"monotone",borderColor:"#7775"}},aspectRatio:25}})})),M=(0,a.memo)(b);var Z=s(8416);y.kL.register(y.u,y.jn,y.ST,y.uw,y.f$,y.od),d().extend(f());const v=(0,r.Pi)((e=>{let{range:t,setRange:s,isAccurate:r,setIsAccurate:c}=e;const{userList:m,listTemplate:f}=u.listStore,{isSmallScreen:y,isTourStarted:h}=S.userStore,{defaultRange:j,setDefaultRange:b,userOptions:v}=x.optionsStore,k=(0,a.useMemo)((()=>h?f:m),[h,f,m]),[T,Y]=(0,a.useState)(j),C=(0,a.useMemo)((()=>{const e=Object.values(h?f:k).map((e=>e.date));return[Math.min(...e),Math.max(...e)]}),[k,h,f]),E=(0,a.useMemo)((()=>{const e=d()(C[0]).startOf("day"),t=d()(C[1]).endOf("day"),s={};let a=e;if(r)for(;a.isBefore(t)||a.isSame(t,"day");)s[a.valueOf()]=1===a.date()?0===a.month()?a.format("YYYY"):a.format("M"):" ",a=a.add(1,"day").startOf("day");else for(;a.isBefore(t)||a.isSame(t,"month");)s[a.valueOf()]=0===a.month()?a.format("YYYY"):" ",a=a.add(1,"month").startOf("month");return s}),[C,r]);(0,a.useEffect)((()=>{b(C)}),[C,b]),(0,a.useEffect)((()=>{s(j)}),[j,s]);const R=(0,a.useCallback)((e=>{s(e)}),[s]);return(0,a.useEffect)((()=>{Y(t)}),[t]),(0,a.useEffect)((()=>{y&&c(!1)}),[y,c]),(0,a.useEffect)((()=>{!r&&s([d().max([d()(t[0]).startOf("month"),d()(j[0])]).valueOf(),d().min([d()(t[1]).endOf("month"),d()(j[1])]).valueOf()])}),[r]),d()(j[1]).diff(d()(j[0]),"hours")>=48?(0,O.jsxs)(n.Z,{gap:16,align:"center",style:{inlineSize:"100%"},children:[(0,O.jsx)(o.Z,{size:y?"small":"middle",defaultValue:r,value:r,onChange:c,options:[{label:(0,O.jsx)(l.Z,{title:Z.Z.byMonth[v.language],children:(0,O.jsx)(p.Z,{})}),value:!1},{label:(0,O.jsx)(l.Z,{title:Z.Z.byDay[v.language],children:(0,O.jsx)(g.Z,{})}),value:!0,disabled:y}]}),(0,O.jsxs)(n.Z,{vertical:!0,align:"stretch",style:{inlineSize:"100%"},children:[(0,O.jsx)(M,{}),(0,O.jsx)(i.Z,{range:!0,value:T,marks:E,step:null,dots:!0,tooltip:{formatter:e=>(0,O.jsx)(O.Fragment,{children:d()(e).format(r?"DD.MM.YY":"MM.YY")})},min:C[0],max:C[1],defaultValue:j,onChange:Y,onChangeComplete:R})]})]}):(0,O.jsx)(O.Fragment,{})})),k=(0,a.memo)(v)},9766:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(2791),r=s(7257),n=s(4320),o=s(4520),l=s(4664),i=s(8807),u=s(3623),c=s(8416),d=s(8418),m=s(7892),f=s.n(m),p=s(5967),g=s(6619),S=s(7703),y=s(184);p.kL.register(p.u,p.vn,p.ZL,p.uw,p.f$);const h=(0,r.Pi)((e=>{let{mode:t,setMode:s}=e;const{isSmallScreen:r,isTourStarted:l}=i.userStore,{userList:m,listTemplate:p}=n.listStore,{statsOptions:h,userOptions:x,setStatsRange:j}=S.optionsStore,{currency:O,language:b}=x,M=(0,a.useMemo)((()=>l?p:m),[l,p,m]),{range:Z}=h,v=(0,a.useMemo)((()=>(0,g.u1)(l?p:M,O,t,f()(Z[0]).year())),[O,M,t,Z,l,p]),k=(0,a.useMemo)((()=>"year"===t?Object.keys(v).map((e=>{const t=f()(e);return t>=f()(Z[0]).startOf("year")&&t<=f()(Z[1]).endOf("year")?"#f00":"#f007"})):Object.keys(v).map((e=>{const t=Number(e);return t>=f()(Z[0]).startOf("month").month()&&t<=f()(Z[1]).endOf("month").month()?"#f00":"#f005"}))),[Z,v,t]),T={labels:"month"===t?c.Z.months[b]:Object.keys(v),datasets:[{label:(0,d.Rh)(O),data:Object.values(v),backgroundColor:k}]},Y={plugins:{legend:{display:!1}},onClick:(e,a)=>{if(a.length){const e=a[0].index,r="year"===t?[f()(Z[0]).year(Number(T.labels[e])).startOf("year").valueOf(),f()(Z[0]).year(Number(T.labels[e])).endOf("year").valueOf()]:[f()(Z[0]).month(e).startOf("month").valueOf(),f()(Z[0]).month(e).endOf("month").valueOf()];"year"===t&&s("month"),j(r)}}};return(0,y.jsx)(o.Z,{style:{inlineSize:r?"unset":"50%"},children:(0,y.jsx)(u.$Q,{data:T,options:Y})})}));var x=s(3475);p.kL.register(p.qi,p.tt,p.u,p.De,p.Dx);const j=(0,r.Pi)((()=>{const{isSmallScreen:e,isTourStarted:t}=i.userStore,{userList:s,listTemplate:r}=n.listStore,{userOptions:l,statsOptions:c}=S.optionsStore,{currency:m}=l,{userCategories:f,categoriesTemplate:p}=x.categoryStore,h=(0,a.useMemo)((()=>t?r:s),[t,r,s]),j=(0,a.useMemo)((()=>t?p:f),[t,f,p]),{range:O}=c,b=(0,a.useMemo)((()=>(0,g.CH)(t?r:h,O,m)),[h,r,m,O,t]),[M,Z,v]=(0,a.useMemo)((()=>{const e=t?p:j;return[b.map((t=>e[t.categoryId].name)),b.map((t=>e[t.categoryId].color)),b.map((e=>Math.round(e.value)))]}),[t,j,p,b]),k={labels:M,datasets:[{label:(0,d.Rh)(m),data:v,backgroundColor:Z}]};return(0,y.jsx)(o.Z,{style:{inlineSize:e?"unset":"40%"},children:(0,y.jsx)(u.by,{data:k,options:{plugins:{legend:{display:!0,position:"right"}}}})})}));var O=s(6818),b=s.n(O),M=s(2158),Z=s(6281),v=s(5160),k=s(3936),T=s(1429);const Y=(0,r.Pi)((()=>{const{isSmallScreen:e,isTourStarted:t}=i.userStore,{userList:s,listTemplate:r}=n.listStore,{statsOptions:o,userOptions:l}=S.optionsStore,{range:u,isAccurate:c}=o,{currency:m}=l,p=(0,a.useMemo)((()=>t?r:s),[t,r,s]),h=(0,a.useMemo)((()=>(0,g.r6)(p,u,m)),[p,u,m]),x=(0,a.useMemo)((()=>{const t=c?"DD.MM.YY":"MM.YY";return(0,y.jsxs)(v.Z.Text,{type:"secondary",style:{fontSize:e?".8em":"1em"},children:[f()(u[0]).format(t),u[0]!==u[1]?"-".concat(f()(u[1]).format(t)):""]})}),[c,u,e]);return(0,y.jsx)(k.Z,{bordered:!0,children:(0,y.jsx)(T.Z,{title:x,value:h,prefix:(0,d.Rh)(m),valueStyle:{color:"#f00",fontSize:e?"1em":"1.5em"}})})})),C=(0,a.memo)(Y);var E=s(3932);f().extend(b());const R=(0,r.Pi)((()=>{const{userList:e,listTemplate:t}=n.listStore,{isSmallScreen:s,loading:r,tourRefs:u,isTourStarted:c}=i.userStore,{statsOptions:d,defaultRange:m,setStatsRange:p,setIsStatsAccurate:g}=S.optionsStore,x=(0,a.useMemo)((()=>c?t:e),[c,t,e]),{range:O,isAccurate:b}=d,[v,k]=(0,a.useState)("year"),T=(0,a.useCallback)((()=>{k("year"),p(m)}),[k,m,p]);(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&T()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[T]);const Y=(0,a.useMemo)((()=>O[0]!==m[0]||O[1]!==m[1]),[O,m]);(0,a.useEffect)((()=>{f()(O[0]).year()!==f()(O[1]).year()?k("year"):k("month")}),[O]);const R=(0,y.jsxs)(o.Z,{gap:16,children:[(0,y.jsx)(C,{}),(0,y.jsx)(E.Z,{reset:T,disabled:!Y})]}),L=(0,y.jsxs)(o.Z,{vertical:!0,gap:16,align:"stretch",style:{inlineSize:"100%"},children:[(0,y.jsx)(o.Z,{ref:u[8],style:{inlineSize:"100%"},children:(0,y.jsx)(M.Z,{setIsAccurate:g,isAccurate:b,range:O,setRange:p})}),(0,y.jsxs)(o.Z,{ref:u[7],align:"center",justify:"space-between",vertical:s,children:[(0,y.jsx)(h,{mode:v,setMode:k}),(0,y.jsx)(j,{})]})]});return r?(0,y.jsx)(Z.Z,{}):Object.keys(c?t:x).length?(0,y.jsxs)(o.Z,{vertical:!0,gap:32,children:[R,L]}):(0,y.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE,description:""})})),L=(0,a.memo)(R)}}]);
//# sourceMappingURL=766.a5997392.chunk.js.map