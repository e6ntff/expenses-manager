"use strict";(self.webpackChunkexpenses_manager=self.webpackChunkexpenses_manager||[]).push([[831],{8650:(e,t,s)=>{s.d(t,{Z:()=>D});var l=s(2791),i=s(3475),n=s(7257),r=s(4320),a=s(1431),c=s(9522),o=s(4520),d=s(3936),u=s(8807),m=s(8416),j=s(7703),Z=s(2506),x=s(6051),p=s(914),g=s(1429),h=s(5160),y=s(6220),S=s(7892),b=s.n(S),C=s(2499),I=s(4878),v=s(9335),k=s(7857),f=s(184);const z=(0,n.Pi)((e=>{let{opened:t,setOpened:s,itemIds:i}=e;const{list:n,replaceItem:a}=r.listStore,{isSmallScreen:c}=u.userStore,{userOptions:d}=j.optionsStore,{language:S}=d,z=(0,l.useCallback)((e=>{a(e,{...n[e],categoryId:I.Z.emptyItem.categoryId})}),[n,a]);return(0,f.jsx)(Z.Z,{open:t,onCancel:()=>{s(!1)},okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:(0,f.jsx)(v.ZP,{autoHide:!0,style:{blockSize:"75vh"},children:(0,f.jsx)(x.Z,{children:i.map((e=>(0,f.jsxs)(y.Z,{children:[(0,f.jsx)(p.Z,{span:5,children:(0,f.jsx)(g.Z,{value:b()(n[e].date).format("DD.MM.YY"),style:{scale:c?".75":"1"}})}),(0,f.jsx)(p.Z,{span:10,children:(0,f.jsx)(o.Z,{justify:"center",style:{opacity:n[e].title?"1":".5"},children:c?(0,f.jsx)(h.Z.Text,{strong:!0,ellipsis:!0,children:n[e].title||m.Z.noTitle[d.language]}):(0,f.jsx)(C.Z,{ellipsis:!0,level:3,style:{margin:0},children:n[e].title||m.Z.noTitle[d.language]})})}),(0,f.jsx)(p.Z,{span:2,children:(0,k.UP)(m.Z.delete[S],c,(()=>{z(e)}))})]},e)))})})})})),O=(0,l.memo)(z),D=(0,n.Pi)((e=>{let{initialCategoryId:t,category:s}=e;const{replaceCategory:n,categories:Z,setLastDeletedCategoryIds:x,lastDeletedCategoryIds:p}=i.categoryStore,{list:g}=r.listStore,{isSmallScreen:h}=u.userStore,{userOptions:y}=j.optionsStore,{language:S}=y,[b,C]=(0,l.useState)(s||Z[t]),[I,v]=(0,l.useState)(!1),z=(0,l.useMemo)((()=>Object.keys(g).reduce(((e,s)=>g[s].categoryId===t?[...e,s]:[...e]),[])),[g,t]),D=(0,l.useCallback)((()=>{x([...p,t])}),[x,t,p]),w=(0,l.useCallback)((e=>{C((s=>JSON.stringify(s)!==JSON.stringify(e)?(n(t,e),e):s))}),[C,n,t]),M=(0,l.useCallback)((e=>{C((t=>{const s={...t,name:e};return w(s),s}))}),[C,w]),P=(0,l.useCallback)((e=>{C((t=>{const s={...t,color:"#".concat(e.toHex())};return w(s),s}))}),[C,w]),T=(0,f.jsx)(a.Z,{title:m.Z.pickColor[S],children:(0,f.jsx)(c.Z,{size:h?"small":"middle",value:b.color,format:"hex",onChangeComplete:P})}),F=(0,l.useMemo)((()=>"".concat(m.Z.itemsWithCurrentCategory[S],": ").concat(z.length)),[z,S]),A=(0,f.jsxs)(o.Z,{align:"center",justify:"space-evenly",children:[(0,k.zF)(F,h,(()=>{z.length&&v(!0)})),T,(0,k.UP)(m.Z.delete[y.language],h,D)]});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.Z,{style:{inlineSize:h?"8em":"12em"},size:h?"small":"default",title:(0,k.I$)(b.name,h,S,{onChange:M}),actions:[A],styles:{title:{padding:10},body:{padding:0}}}),(0,f.jsx)(O,{opened:I,setOpened:v,itemIds:z})]})}))},594:(e,t,s)=>{s.d(t,{Z:()=>F});var l=s(2791),i=s(1457),n=s(7257),r=s(8807),a=s(8416),c=s(1855),o=s(1468),d=s(2506),u=s(3070),m=s(6106),j=s(914),Z=s(3556),x=s(4878),p=s(7892),g=s.n(p),h=s(3475),y=s(126),S=s(8228),b=s(184);const C=(0,n.Pi)((e=>{let{id:t,onChange:s}=e;const{categories:l}=h.categoryStore,{isSmallScreen:i}=r.userStore;return(0,b.jsx)(y.Z,{size:i?"small":"middle",style:{minInlineSize:"7em"},onChange:s,value:t,suffixIcon:(0,b.jsx)(S.Z,{style:{color:l[t]&&l[t].color}}),options:Object.keys(l).map((e=>({label:l[e].name,value:e})))})}));var I=s(7575),v=s(732),k=s(7703),f=s(4320),z=s(7106),O=s(9286),D=s(1234),w=s(8104),M=s(8709);const P=(0,n.Pi)((e=>{let{onChange:t,image:s}=e;const[i,n]=(0,l.useState)(!1),r=(0,l.useCallback)((e=>{"uploading"===e.file.status&&n(!0),"done"===e.file.status&&((e,t)=>{const s=new FileReader;s.addEventListener("load",(()=>t(s.result))),s.readAsDataURL(e)})(e.file.originFileObj,(e=>{n(!1),t(e)}))}),[n,t]);return(0,b.jsx)(M.Z,{cropShape:"round",rotationSlider:!0,children:(0,b.jsx)(D.Z,{action:"1",accept:"image/*",listType:"picture-circle",showUploadList:!1,onChange:r,maxCount:1,children:s?(0,b.jsx)(w.Z,{preview:!1,src:s,style:{width:"100%",borderRadius:"50px"}}):i?(0,b.jsx)(z.Z,{style:{scale:"1.5"}}):(0,b.jsx)(O.Z,{style:{scale:"1.5"}})})})}));var T=s(8418);const F=(0,n.Pi)((e=>{let{opened:t,initialItemId:s,toggleOpened:n,submitItem:p}=e;const[h,y]=(0,l.useState)(x.Z.baseCurrency),{currencyRates:S,isSmallScreen:z}=r.userStore,{userOptions:O}=k.optionsStore,{list:D}=f.listStore,{language:w}=O,M=(0,l.useMemo)((()=>void 0!==s?D[s]:x.Z.emptyItem),[D,s]),[F,A]=(0,l.useState)(M),Y=(0,l.useCallback)((e=>{const{value:t}=e.target;A((e=>({...e,title:t})))}),[A]),L=(0,l.useCallback)((e=>{e&&A((t=>({...t,date:e.valueOf()})))}),[A]),R=(0,l.useCallback)((e=>{A((t=>({...t,categoryId:e})))}),[A]),H=(0,l.useCallback)((e=>{const{value:t}=e.target;A((e=>{const s={...e,price:{...e.price,[h]:Number(t)}};return{...s,price:(0,i.Z)(s.price,S,h)}}))}),[A,h,S]),N=(0,l.useCallback)((e=>{(0,T.u)(e,.5).then((e=>{A((t=>({...t,image:e})))}))}),[A]);(0,l.useEffect)((()=>{const e=s=>{"Enter"===s.key&&t&&(p(F),window.removeEventListener("keyup",e))};return window.addEventListener("keyup",e),()=>{window.removeEventListener("keyup",e)}}),[F,p,t]);const E=(0,b.jsx)(c.Z,{required:!0,type:"text",value:F.title,onInput:Y}),J=(0,b.jsx)(c.Z,{required:!0,type:"number",min:"1",step:"1",value:Math.round(F.price[h]),onInput:H}),U=(0,b.jsx)(Z.Z,{value:h,setCurrency:y,onChange:y}),B=(0,b.jsx)(o.Z,{required:!0,onChange:L,value:g()(F.date),minDate:x.Z.startDate,maxDate:g()()}),$=(0,b.jsx)(C,{id:F.categoryId,onChange:R}),q=(0,b.jsx)(P,{image:F.image,onChange:N});return(0,b.jsx)(d.Z,{open:t,okButtonProps:{size:z?"small":"middle"},cancelButtonProps:{size:z?"small":"middle"},onOk:()=>{p(F)},onCancel:()=>{A(M),n()},okText:(0,b.jsx)(I.Z,{}),cancelText:(0,b.jsx)(v.Z,{}),children:(0,b.jsxs)(u.Z,{size:z?"small":"middle",layout:"vertical",style:{inlineSize:"100%"},children:[(0,b.jsx)(u.Z.Item,{label:a.Z.title[w],children:E}),(0,b.jsx)(u.Z.Item,{label:a.Z.price[w],children:(0,b.jsxs)(m.Z,{children:[(0,b.jsx)(j.Z,{span:16,children:J}),(0,b.jsx)(j.Z,{span:1}),(0,b.jsx)(j.Z,{span:7,children:U})]})}),(0,b.jsx)(u.Z.Item,{label:a.Z.dateAndCat[w],children:(0,b.jsxs)(m.Z,{children:[(0,b.jsx)(j.Z,{span:10,children:B}),(0,b.jsx)(j.Z,{span:1}),(0,b.jsx)(j.Z,{span:13,children:$})]})}),(0,b.jsx)(u.Z.Item,{label:a.Z.image[w],children:q})]})})}))},7857:(e,t,s)=>{s.d(t,{I$:()=>b,IX:()=>I,JN:()=>k,UP:()=>z,Vh:()=>C,eb:()=>f,o5:()=>v,zF:()=>S});var l=s(9966),i=s(1635),n=s(1752),r=s(2622),a=s(1431),c=s(4520),o=s(5160),d=s(8104),u=s(9367),m=s(1429),j=s(952),Z=s(2499),x=s(8416),p=s(7892),g=s.n(p),h=s(8418),y=s(184);const S=(e,t,s)=>(0,y.jsx)(a.Z,{title:e,children:(0,y.jsx)(l.Z,{onClick:s,style:{scale:t?"1":"1.5"}})}),b=(e,t,s,l)=>(0,y.jsx)(c.Z,{justify:"center",style:{opacity:e?"1":".5"},children:t?(0,y.jsx)(o.Z.Text,{strong:!0,ellipsis:!0,editable:l||!1,children:e||x.Z.noTitle[s]}):(0,y.jsx)(Z.Z,{editable:l||!1,ellipsis:!0,level:3,style:{margin:0},children:e||x.Z.noTitle[s]})}),C=(e,t,s,l)=>e?(0,y.jsx)(a.Z,{color:"#0005",placement:"right",title:(0,y.jsx)(d.Z,{preview:!1,src:e,style:{borderRadius:"50%",inlineSize:"100%",blockSize:"100%",objectFit:"cover"}}),children:(0,y.jsx)(u.C,{style:{cursor:"pointer"},size:t?"small":"default",icon:(0,y.jsx)(c.Z,{style:{inlineSize:"100%",blockSize:"100%",objectFit:"cover"},children:(0,y.jsx)(d.Z,{preview:!1,src:e,style:{inlineSize:"100%",blockSize:"100%",objectFit:"cover"}})})})}):(0,y.jsx)(a.Z,{title:x.Z.noImage[l],children:(0,y.jsx)(u.C,{style:{cursor:"pointer"},onClick:s,icon:(0,y.jsx)(i.Z,{})})}),I=(e,t)=>(0,y.jsx)(m.Z,{value:g()(e).format("DD.MM.YY"),style:{scale:t?".67":".75"}}),v=e=>(0,y.jsx)(c.Z,{vertical:!0,align:"stretch",children:e&&(0,y.jsx)(j.Z,{color:e.color,children:(0,y.jsx)("span",{style:{margin:"auto",color:e.color,filter:"invert(1)"},children:e.name})})}),k=(e,t,s)=>(0,y.jsx)(c.Z,{justify:"center",children:t?(0,y.jsxs)(o.Z.Text,{strong:!0,children:[(0,h.Rh)(s),Math.round(e[s])]}):(0,y.jsx)(Z.Z,{level:3,style:{margin:0},children:(0,h.Rh)(s,e[s])})}),f=(e,t,s)=>(0,y.jsx)(a.Z,{title:e,children:(0,y.jsx)(n.Z,{onClick:s,style:{scale:t?"1":"1.5"}})}),z=(e,t,s)=>(0,y.jsx)(a.Z,{title:e,children:(0,y.jsx)(r.Z,{onClick:s,style:{scale:t?"1":"1.5"}})})},6246:(e,t,s)=>{s.d(t,{Z:()=>y});var l=s(2791),i=s(6220),n=s(4520),r=s(914),a=s(3936),c=s(7257),o=s(4320),d=s(8807),u=s(594),m=s(7703),j=s(8416),Z=s(3475),x=s(7892),p=s.n(x),g=s(7857),h=s(184);const y=(0,c.Pi)((e=>{let{mode:t,initialItemId:s,item:c}=e;const{isSmallScreen:x,isTourStarted:y}=d.userStore,{replaceItem:S,list:b,setLastDeletedItemIds:C,lastDeletedItemIds:I}=o.listStore,{userOptions:v}=m.optionsStore,{categories:k,categoriesTemplate:f}=Z.categoryStore,z=(0,l.useMemo)((()=>y?f:k),[y,k,f]),{currency:O,language:D}=v,[w,M]=(0,l.useState)(!1),[P,T]=(0,l.useState)(c||b[s]),F=(0,l.useCallback)((()=>{M((e=>!e))}),[M]),A=(0,l.useCallback)((e=>{T((t=>{if(JSON.stringify(t)!==JSON.stringify(e)){const t={...e,updatedAt:p()().valueOf()};return S(s,t),t}return t})),F()}),[T,S,F,s]),Y=(0,l.useCallback)((()=>{C([...I,s])}),[C,s,I]),L=(0,h.jsxs)(n.Z,{justify:"space-evenly",children:[(0,g.eb)(j.Z.edit[D],x,F),(0,g.JN)(P.price,x,O),(0,g.UP)(j.Z.delete[D],x,Y)]}),R=(0,h.jsxs)(n.Z,{align:"center",children:[(0,g.Vh)(P.image,x,F,D),(0,g.IX)(P.date,x)]}),H=(0,l.useMemo)((()=>P.updatedAt?(0,h.jsxs)(h.Fragment,{children:["".concat(j.Z.createdAt[D]," ").concat(p()(P.createdAt).format("HH:mm:ss DD.MM.YY")),(0,h.jsx)("br",{}),"".concat(j.Z.updatedAt[D]," ").concat(p()(P.updatedAt).format("HH:mm:ss DD.MM.YY"))]}):(0,h.jsx)(h.Fragment,{children:"".concat(j.Z.createdAt[D]," ").concat(p()(P.createdAt).format("HH:mm:ss DD.MM.YY"))})),[P,D]);return null!==c&&void 0!==c&&c.deleted?(0,h.jsx)(h.Fragment,{}):(0,h.jsxs)(h.Fragment,{children:[!c&&(0,h.jsx)(u.Z,{opened:w,initialItemId:s,toggleOpened:F,submitItem:A}),"list"===t?(0,h.jsxs)(i.Z,{children:[(0,h.jsx)(r.Z,{children:R}),(0,h.jsx)(r.Z,{span:9,children:(0,g.I$)(P.title,x,D)}),(0,h.jsx)(r.Z,{span:3,children:(0,g.o5)(z[P.categoryId])}),(0,h.jsx)(r.Z,{span:5,children:(0,g.JN)(P.price,x,O)}),(0,h.jsx)(r.Z,{span:1,children:(0,g.eb)(j.Z.edit[D],x,F)}),(0,h.jsx)(r.Z,{span:1,children:(0,g.UP)(j.Z.delete[D],x,Y)}),(0,h.jsx)(r.Z,{span:1,children:(0,g.zF)(H,x)})]}):(0,h.jsx)(a.Z,{extra:[(0,g.zF)(H,x)],size:x?"small":"default",bordered:!0,title:(0,g.I$)(P.title,x,D),actions:[L],style:{inlineSize:x?"9em":"12em"},children:(0,h.jsx)(n.Z,{justify:"center",children:(0,h.jsxs)(n.Z,{vertical:!0,align:"stretch",gap:4,children:[R,(0,g.o5)(z[P.categoryId])]})})})]})}))},5831:(e,t,s)=>{s.d(t,{Z:()=>x});var l=s(4520),i=s(6051),n=s(1046),r=s(7257),a=s(2791),c=s(6619),o=s(8807),d=s(6246),u=s(8650),m=s(4320),j=s(3475),Z=s(184);const x=(0,r.Pi)((e=>{let{list:t,mode:s}=e;const{tourRefs:r,currencyRates:x,isSmallScreen:p}=o.userStore,{setListTemplate:g,listTemplate:h}=m.listStore,{setCategoriesTemplate:y,categoriesTemplate:S}=j.categoryStore;switch((0,a.useEffect)((()=>{const e=(0,c.ju)(10,10,5,3,x);g(e.items),y(e.categories)}),[x,y,g]),t){case"item":return(0,Z.jsx)(l.Z,{ref:r[1],style:{inlineSize:"100%"},children:"list"===s?(0,Z.jsx)(i.Z,{style:{inlineSize:"100%"},children:Object.keys(h).map((e=>(0,Z.jsx)(d.Z,{initialItemId:e,item:h[e],mode:s},e)))}):(0,Z.jsx)(n.Z,{wrap:!0,size:p?8:16,children:Object.keys(S).map((e=>(0,Z.jsx)(d.Z,{initialItemId:e,item:h[e],mode:s||"grid"},e)))})});case"category":return(0,Z.jsx)(l.Z,{ref:r[3],style:{inlineSize:"100%"},children:(0,Z.jsx)(n.Z,{wrap:!0,size:p?8:16,children:Object.keys(S).slice(1).map((e=>S[e].deleted?(0,Z.jsx)(Z.Fragment,{}):(0,Z.jsx)(u.Z,{initialCategoryId:e,category:S[e]},e)))})})}}))}}]);
//# sourceMappingURL=831.4420ab37.chunk.js.map