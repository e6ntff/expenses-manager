"use strict";(self.webpackChunkexpenses_manager=self.webpackChunkexpenses_manager||[]).push([[766],{3932:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(3605),n=s(1431),r=s(2556),o=s(7257),l=(s(2791),s(8416)),i=s(7703),u=s(8807),c=s(184);const d=(0,o.Pi)((e=>{let{disabled:t,reset:s}=e;const{userOptions:o}=i.optionsStore,{isSmallScreen:d}=u.userStore;return(0,c.jsx)(n.Z,{title:l.Z.reset[o.language],children:(0,c.jsx)(r.ZP,{disabled:t,onClick:s,size:d?"small":"middle",children:(0,c.jsx)(a.Z,{})})})}))},2158:(e,t,s)=>{s.d(t,{Z:()=>k});var a=s(2791),n=s(7257),r=s(4520),o=s(4248),l=s(1431),i=s(7708),u=s(4320),c=s(7892),d=s.n(c),m=s(9026),f=s.n(m),p=s(4895),g=s(4187),y=s(8807),S=s(5967),h=s(3623),x=s(7703),j=s(6619),O=s(184);const b=(0,n.Pi)((()=>{const{list:e}=u.listStore,{defaultRange:t}=x.optionsStore,s=(0,a.useMemo)((()=>(0,j.BF)(e,t)),[e,t]),n={labels:new Array(s.length).fill(""),datasets:[{data:s}]};return(0,O.jsx)(h.x1,{style:{inlineSize:"100%"},data:n,options:{plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,grid:{display:!1}},y:{display:!1,grid:{display:!1}}},elements:{point:{radius:0},line:{cubicInterpolationMode:"monotone",borderColor:"#7775"}},aspectRatio:25}})})),Z=(0,a.memo)(b);var v=s(8416);S.kL.register(S.u,S.jn,S.ST,S.uw,S.f$,S.od),d().extend(f());const M=(0,n.Pi)((e=>{let{range:t,setRange:s,isAccurate:n,setIsAccurate:c}=e;const{list:m,listTemplate:f}=u.listStore,{isSmallScreen:S,isTourStarted:h}=y.userStore,{defaultRange:j,setDefaultRange:b,userOptions:M}=x.optionsStore,[k,Y]=(0,a.useState)(j),E=(0,a.useMemo)((()=>{const e=Object.values(h?f:m).map((e=>e.date));return[Math.min(...e),Math.max(...e)]}),[m,h,f]),C=(0,a.useMemo)((()=>{const e=d()(E[0]).startOf("day"),t=d()(E[1]).endOf("day"),s={};let a=e;if(n)for(;a.isBefore(t)||a.isSame(t,"day");)s[a.valueOf()]=1===a.date()?0===a.month()?a.format("YYYY"):a.format("M"):" ",a=a.add(1,"day").startOf("day");else for(;a.isBefore(t)||a.isSame(t,"month");)s[a.valueOf()]=0===a.month()?a.format("YYYY"):" ",a=a.add(1,"month").startOf("month");return s}),[E,n]);(0,a.useEffect)((()=>{b(E)}),[E,b]),(0,a.useEffect)((()=>{s(j)}),[j,s]);const R=(0,a.useCallback)((e=>{s(e)}),[s]);return(0,a.useEffect)((()=>{Y(t)}),[t]),(0,a.useEffect)((()=>{S&&c(!1)}),[S,c]),(0,a.useEffect)((()=>{!n&&s([d().max([d()(t[0]).startOf("month"),d()(j[0])]).valueOf(),d().min([d()(t[1]).endOf("month"),d()(j[1])]).valueOf()])}),[n]),d()(j[1]).diff(d()(j[0]),"hours")>=48?(0,O.jsxs)(r.Z,{gap:16,align:"center",style:{inlineSize:"100%"},children:[(0,O.jsx)(o.Z,{size:S?"small":"middle",defaultValue:n,value:n,onChange:c,options:[{label:(0,O.jsx)(l.Z,{title:v.Z.byMonth[M.language],children:(0,O.jsx)(p.Z,{})}),value:!1},{label:(0,O.jsx)(l.Z,{title:v.Z.byDay[M.language],children:(0,O.jsx)(g.Z,{})}),value:!0,disabled:S}]}),(0,O.jsxs)(r.Z,{vertical:!0,align:"stretch",style:{inlineSize:"100%"},children:[(0,O.jsx)(Z,{}),(0,O.jsx)(i.Z,{range:!0,value:k,marks:C,step:null,dots:!0,tooltip:{formatter:e=>(0,O.jsx)(O.Fragment,{children:d()(e).format(n?"DD.MM.YY":"MM.YY")})},min:E[0],max:E[1],defaultValue:j,onChange:Y,onChangeComplete:R})]})]}):(0,O.jsx)(O.Fragment,{})})),k=(0,a.memo)(M)},9766:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var a=s(2791),n=s(7257),r=s(4320),o=s(4520),l=s(4664),i=s(8807),u=s(3623),c=s(8416),d=s(8418),m=s(7892),f=s.n(m),p=s(5967),g=s(6619),y=s(7703),S=s(184);p.kL.register(p.u,p.vn,p.ZL,p.uw,p.f$);const h=(0,n.Pi)((e=>{let{mode:t,setMode:s}=e;const{isSmallScreen:n,isTourStarted:l}=i.userStore,{list:m,listTemplate:p}=r.listStore,{statsOptions:h,userOptions:x,setStatsRange:j}=y.optionsStore,{currency:O,language:b}=x,{range:Z}=h,v=(0,a.useMemo)((()=>(0,g.u1)(l?p:m,O,t,f()(Z[0]).year())),[O,m,t,Z,l,p]),M=(0,a.useMemo)((()=>"year"===t?Object.keys(v).map((e=>{const t=f()(e);return t>=f()(Z[0]).startOf("year")&&t<=f()(Z[1]).endOf("year")?"#f00":"#f007"})):Object.keys(v).map((e=>{const t=Number(e);return t>=f()(Z[0]).startOf("month").month()&&t<=f()(Z[1]).endOf("month").month()?"#f00":"#f005"}))),[Z,v,t]),k={labels:"month"===t?c.Z.months[b]:Object.keys(v),datasets:[{label:(0,d.Rh)(O),data:Object.values(v),backgroundColor:M}]},Y={plugins:{legend:{display:!1}},onClick:(e,a)=>{if(a.length){const e=a[0].index,n="year"===t?[f()(Z[0]).year(Number(k.labels[e])).startOf("year").valueOf(),f()(Z[0]).year(Number(k.labels[e])).endOf("year").valueOf()]:[f()(Z[0]).month(e).startOf("month").valueOf(),f()(Z[0]).month(e).endOf("month").valueOf()];"year"===t&&s("month"),j(n)}}};return(0,S.jsx)(o.Z,{style:{inlineSize:n?"unset":"50%"},children:(0,S.jsx)(u.$Q,{data:k,options:Y})})}));var x=s(3475);p.kL.register(p.qi,p.tt,p.u,p.De,p.Dx);const j=(0,n.Pi)((()=>{const{isSmallScreen:e,isTourStarted:t}=i.userStore,{list:s,listTemplate:n}=r.listStore,{userOptions:l,statsOptions:c}=y.optionsStore,{currency:m}=l,{categories:f,categoriesTemplate:p}=x.categoryStore,{range:h}=c,j=(0,a.useMemo)((()=>(0,g.CH)(t?n:s,h,m)),[s,n,m,h,t]),[O,b,Z]=(0,a.useMemo)((()=>{const e=t?p:f;return[j.map((t=>e[t.categoryId].name)),j.map((t=>e[t.categoryId].color)),j.map((e=>Math.round(e.value)))]}),[t,f,p,j]),v={labels:O,datasets:[{label:(0,d.Rh)(m),data:Z,backgroundColor:b}]};return(0,S.jsx)(o.Z,{style:{inlineSize:e?"unset":"40%"},children:(0,S.jsx)(u.by,{data:v,options:{plugins:{legend:{display:!0,position:"right"}}}})})}));var O=s(6818),b=s.n(O),Z=s(2158),v=s(6281),M=s(5160),k=s(3936),Y=s(1429);const E=(0,n.Pi)((()=>{const{isSmallScreen:e}=i.userStore,{list:t}=r.listStore,{statsOptions:s,userOptions:n}=y.optionsStore,{range:o,isAccurate:l}=s,{currency:u}=n,c=(0,a.useMemo)((()=>(0,g.r6)(t,o,u)),[t,o,u]),m=(0,a.useMemo)((()=>{const t=l?"DD.MM.YY":"MM.YY";return(0,S.jsxs)(M.Z.Text,{type:"secondary",style:{fontSize:e?".8em":"1em"},children:[f()(o[0]).format(t),o[0]!==o[1]?"-".concat(f()(o[1]).format(t)):""]})}),[l,o,e]);return(0,S.jsx)(k.Z,{bordered:!0,children:(0,S.jsx)(Y.Z,{title:m,value:c,prefix:(0,d.Rh)(u),valueStyle:{color:"#f00",fontSize:e?"1em":"1.5em"}})})})),C=(0,a.memo)(E);var R=s(3932);f().extend(b());const w=(0,n.Pi)((()=>{const{list:e,listTemplate:t}=r.listStore,{isSmallScreen:s,loading:n,tourRefs:u,isTourStarted:c}=i.userStore,{statsOptions:d,defaultRange:m,setStatsRange:p,setIsStatsAccurate:g}=y.optionsStore,{range:x,isAccurate:O}=d,[b,M]=(0,a.useState)("year"),k=(0,a.useCallback)((()=>{M("year"),p(m)}),[M,m,p]);(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&k()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[k]);const Y=(0,a.useMemo)((()=>x[0]!==m[0]||x[1]!==m[1]),[x,m]);(0,a.useEffect)((()=>{f()(x[0]).year()!==f()(x[1]).year()?M("year"):M("month")}),[x]);const E=(0,S.jsxs)(o.Z,{gap:16,children:[(0,S.jsx)(C,{}),(0,S.jsx)(R.Z,{reset:k,disabled:!Y})]}),w=(0,S.jsxs)(o.Z,{vertical:!0,gap:16,align:"stretch",style:{inlineSize:"100%"},children:[(0,S.jsx)(o.Z,{ref:u[8],style:{inlineSize:"100%"},children:(0,S.jsx)(Z.Z,{setIsAccurate:g,isAccurate:O,range:x,setRange:p})}),(0,S.jsxs)(o.Z,{ref:u[7],align:"center",justify:"space-between",vertical:s,children:[(0,S.jsx)(h,{mode:b,setMode:M}),(0,S.jsx)(j,{})]})]});return n?(0,S.jsx)(v.Z,{}):Object.keys(c?t:e).length?(0,S.jsxs)(o.Z,{vertical:!0,gap:32,children:[E,w]}):(0,S.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE,description:""})})),T=(0,a.memo)(w)}}]);
//# sourceMappingURL=766.0656bbe1.chunk.js.map