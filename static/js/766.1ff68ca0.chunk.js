"use strict";(self.webpackChunkexpenses_manager=self.webpackChunkexpenses_manager||[]).push([[766],{2158:(e,t,s)=>{s.d(t,{Z:()=>j});var n=s(2791),a=s(7257),r=s(4520),o=s(7708),l=s(4320),i=s(7892),u=s.n(i),c=s(9026),d=s.n(c),m=s(5967),f=s(3623),g=s(7703),p=s(6619),y=s(184);const h=(0,a.Pi)((()=>{const{list:e}=l.listStore,{defaultRange:t}=g.optionsStore,s=(0,n.useMemo)((()=>(0,p.BF)(e,t)),[e,t]),a={labels:new Array(s.length).fill(""),datasets:[{data:s}]};return(0,y.jsx)(f.x1,{style:{inlineSize:"100%"},data:a,options:{plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,grid:{display:!1}},y:{display:!1,grid:{display:!1}}},elements:{point:{radius:0},line:{cubicInterpolationMode:"monotone",borderColor:"#7775"}},aspectRatio:25}})})),S=(0,n.memo)(h);m.kL.register(m.u,m.jn,m.ST,m.uw,m.f$,m.od),u().extend(d());const x=(0,a.Pi)((e=>{let{range:t,setRange:s}=e;const{list:a}=l.listStore,{defaultRange:i,setDefaultRange:c}=g.optionsStore,[d,m]=(0,n.useState)(i),f=(0,n.useMemo)((()=>{const e=Object.values(a).map((e=>e.date));return[Math.min(...e),Math.max(...e)]}),[a]),p=(0,n.useMemo)((()=>{const e=u()(f[0]).startOf("day"),t=u()(f[1]).endOf("day"),s={};let n=e;for(;n.isBefore(t)||n.isSame(t,"month");)s[n.valueOf()]=0===n.month()?n.format("YYYY"):" ",n=n.add(1,"month").startOf("month");return s}),[f]);(0,n.useEffect)((()=>{c(f)}),[f,c]),(0,n.useEffect)((()=>{s(i)}),[i,s]);const h=(0,n.useCallback)((e=>{s(e)}),[s]);return(0,n.useEffect)((()=>{m(t)}),[t]),u()(i[1]).diff(u()(i[0]),"hours")>=48?(0,y.jsxs)(r.Z,{vertical:!0,align:"stretch",style:{inlineSize:"100%"},children:[(0,y.jsx)(S,{}),(0,y.jsx)(o.Z,{range:!0,value:d,marks:p,step:null,dots:!0,tooltip:{formatter:e=>u()(e).format("MM.YY")},min:f[0],max:f[1],defaultValue:i,onChange:m,onChangeComplete:h})]}):(0,y.jsx)(y.Fragment,{})})),j=(0,n.memo)(x)},9766:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Y});var n=s(2791),a=s(7257),r=s(4320),o=s(4520),l=s(4664),i=s(8807),u=s(3623),c=s(8416),d=s(8418),m=s(7892),f=s.n(m),g=s(5967),p=s(6619),y=s(7703),h=s(184);g.kL.register(g.u,g.vn,g.ZL,g.uw,g.f$);const S=(0,a.Pi)((e=>{let{mode:t,setMode:s}=e;const{isSmallScreen:a}=i.userStore,{list:l}=r.listStore,{statsOptions:m,userOptions:g,setStatsRange:S}=y.optionsStore,{currency:x,language:j}=g,{range:O}=m,b=(0,n.useMemo)((()=>(0,p.u1)(l,x,t,f()(O[0]).year())),[x,t,O,l]),v=(0,n.useMemo)((()=>"year"===t?Object.keys(b).map((e=>{const t=f()(e);return t>=f()(O[0]).startOf("year")&&t<=f()(O[1]).endOf("year")?"#f00":"#f007"})):Object.keys(b).map((e=>{const t=Number(e);return t>=f()(O[0]).startOf("month").month()&&t<=f()(O[1]).endOf("month").month()?"#f00":"#f005"}))),[O,b,t]),M={labels:"month"===t?c.Z.months[j]:Object.keys(b),datasets:[{label:(0,d.Rh)(x),data:Object.values(b),backgroundColor:v}]},k={plugins:{legend:{display:!1}},onClick:(e,n)=>{if(n.length){const e=n[0].index,a="year"===t?[f()(O[0]).year(Number(M.labels[e])).startOf("year").valueOf(),f()(O[0]).year(Number(M.labels[e])).endOf("year").valueOf()]:[f()(O[0]).month(e).startOf("month").valueOf(),f()(O[0]).month(e).endOf("month").valueOf()];"year"===t&&s("month"),S(a)}}};return(0,h.jsx)(o.Z,{style:{inlineSize:a?"unset":"50%"},children:(0,h.jsx)(u.$Q,{data:M,options:k})})}));var x=s(3475);g.kL.register(g.qi,g.tt,g.u,g.De,g.Dx);const j=(0,a.Pi)((()=>{const{isSmallScreen:e}=i.userStore,{list:t}=r.listStore,{userOptions:s,statsOptions:a}=y.optionsStore,{currency:l}=s,{categories:c}=x.categoryStore,{range:m}=a,f=(0,n.useMemo)((()=>(0,p.CH)(t,m,l)),[t,l,m]),[g,S,j]=(0,n.useMemo)((()=>[f.map((e=>c[e.categoryId].name)),f.map((e=>c[e.categoryId].color)),f.map((e=>Math.round(e.value)))]),[c,f]),O={labels:g,datasets:[{label:(0,d.Rh)(l),data:j,backgroundColor:S}]};return(0,h.jsx)(o.Z,{style:{inlineSize:e?"unset":"40%"},children:(0,h.jsx)(u.by,{data:O,options:{plugins:{legend:{display:!0,position:"right"}}}})})}));var O=s(6818),b=s.n(O),v=s(2158),M=s(6281),k=s(5160),Z=s(3936),R=s(1429),C=s(1431),E=s(3605);const w=(0,a.Pi)((e=>{let{resetRange:t}=e;const{isSmallScreen:s}=i.userStore,{list:a}=r.listStore,{statsOptions:o,userOptions:l,defaultRange:u}=y.optionsStore,{range:c}=o,{currency:m}=l,g=(0,n.useMemo)((()=>(0,p.r6)(a,c,m)),[a,c,m]),S=(0,n.useMemo)((()=>{const e="DD.MM.YY";return(0,h.jsxs)(k.Z.Text,{type:"secondary",style:{fontSize:s?".8em":"1.2em"},children:[f()(c[0]).format(e),c[0]!==c[1]?"-".concat(f()(c[1]).format(e)):""]})}),[c,s]),x=(0,n.useMemo)((()=>c[0]!==u[0]||c[1]!==u[1]),[c,u]);return(0,h.jsx)(Z.Z,{bordered:!0,children:(0,h.jsx)(R.Z,{title:(0,h.jsx)(C.Z,{placement:"right",color:"#0000",open:x,title:(0,h.jsx)(E.Z,{onClick:t,style:{scale:s?"1":"1.25",filter:"invert()"}}),children:S}),value:g,prefix:(0,d.Rh)(m),valueStyle:{color:"#f00",fontSize:s?"1.5em":"2.25em"}})})})),z=(0,n.memo)(w);f().extend(b());const P=(0,a.Pi)((()=>{const{list:e}=r.listStore,{isSmallScreen:t,loading:s,tourRefs:a}=i.userStore,{statsOptions:u,defaultRange:c,setStatsRange:d}=y.optionsStore,{range:m}=u,[g,p]=(0,n.useState)("year"),x=(0,n.useCallback)((()=>{p("year"),d(c)}),[p,c,d]);(0,n.useEffect)((()=>{const e=e=>{"Escape"===e.key&&x()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[x]),(0,n.useEffect)((()=>{f()(m[0]).year()!==f()(m[1]).year()?p("year"):p("month")}),[m]);const O=(0,h.jsxs)(o.Z,{vertical:!0,gap:16,align:"stretch",style:{inlineSize:"100%"},children:[(0,h.jsx)(o.Z,{ref:a[8],style:{inlineSize:"100%"},children:(0,h.jsx)(v.Z,{range:m,setRange:d})}),(0,h.jsxs)(o.Z,{ref:a[7],align:"center",justify:"space-between",vertical:t,children:[(0,h.jsx)(S,{mode:g,setMode:p}),(0,h.jsx)(j,{})]})]});return s?(0,h.jsx)(M.Z,{}):Object.keys(e).length?(0,h.jsxs)(o.Z,{vertical:!0,gap:32,align:"start",children:[(0,h.jsx)(z,{resetRange:x}),O]}):(0,h.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE,description:""})})),Y=(0,n.memo)(P)}}]);
//# sourceMappingURL=766.1ff68ca0.chunk.js.map